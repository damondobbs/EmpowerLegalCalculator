<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Empower Legal Calculator</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
    tailwind.config = {
        darkMode: 'class',
        theme: {
            extend: {
                colors: { primary: '#CE0019' }
            }
        }
    }
</script>

<style>
    .blob { animation: blob 7s infinite; }
    .delay-2 { animation-delay: 2s; }
    .delay-4 { animation-delay: 4s; }
    @keyframes blob {
        0%, 100% { transform: translate(0, 0) scale(1); }
        33% { transform: translate(30px, -50px) scale(1.1); }
        66% { transform: translate(-20px, 20px) scale(0.9); }
    }
    @media (max-width: 768px) {
        button, select, input {
            min-height: 44px;
            min-width: 44px;
        }
    }
</style>
</head>

<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen flex items-center justify-center relative overflow-x-hidden">
<div class="fixed inset-0 bg-gradient-to-br from-gray-200 to-gray-100 dark:from-gray-800 dark:to-gray-900 opacity-80"></div>
<div class="fixed inset-0 backdrop-blur-sm"></div>
<div class="fixed w-full md:w-96 h-96 filter blur-3xl opacity-10 dark:opacity-5">
    <div class="absolute top-0 left-0 w-32 h-32 md:w-48 md:h-48 bg-primary rounded-full mix-blend-multiply blob"></div>
    <div class="absolute top-0 right-0 w-32 h-32 md:w-48 md:h-48 bg-gray-400 dark:bg-gray-600 rounded-full mix-blend-multiply blob delay-2"></div>
    <div class="absolute bottom-0 left-0 w-32 h-32 md:w-48 md:h-48 bg-gray-300 dark:bg-gray-700 rounded-full mix-blend-multiply blob delay-4"></div>
</div>

<div class="calculator-container max-w-6xl w-full mx-4 md:mx-auto bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-lg p-4 md:p-6 shadow-lg z-10 my-8 md:my-0">
    <header class="flex flex-col md:flex-row items-center justify-between mb-6 space-y-4 md:space-y-0">
        <h1 class="text-xl md:text-2xl font-bold">Empower Legal Calculator</h1>
        <div class="flex items-center space-x-4">
            <button id="themeToggle" class="p-3 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors" aria-label="Toggle theme">
                <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                </svg>
            </button>
            <img src="https://devintegris.wpengine.com/wp-content/uploads/2021/09/integris-logo-black-rgb.png" alt="Integris Logo" class="h-6 md:h-8 dark:hidden">
            <img src="https://devintegris.wpengine.com/wp-content/uploads/2021/09/integris-logo-white-rgb.png" alt="Integris Logo" class="h-6 md:h-8 hidden dark:block">
        </div>
    </header>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
        <form id="calculatorForm" class="space-y-6">
            <h2 class="text-lg md:text-xl font-bold mb-4">Configure Your Service</h2>
            <div class="space-y-4 md:space-y-6">
                <div class="form-group">
                    <label for="product" class="block text-sm font-medium mb-2">Product</label>
                    <select id="product" required class="w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary focus:border-primary transition-colors">
                        <option value="EmpowerLegal">Empower Legal</option>
                        <option value="EmpowerPlusLegal">Empower+ Legal</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="region" class="block text-sm font-medium mb-2">Location</label>
                    <select id="region" required class="w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary focus:border-primary transition-colors">
                        <option value="tier1">Market 1 (UP, Hibbing, etc.)</option>
                        <option value="tier2">Market 2 (DEN, DAL, etc.)</option>
                        <option value="tier3">Market 3 (NJ, DC, ATL)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="computers" class="block text-sm font-medium mb-2">Number of Computers</label>
                    <input type="number" id="computers" min="10" value="10" required class="w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary focus:border-primary transition-colors">
                </div>
                <div class="form-group">
                    <label for="servers" class="block text-sm font-medium mb-2">Number of Servers</label>
                    <input type="number" id="servers" min="1" value="1" required class="w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary focus:border-primary transition-colors">
                </div>
                <div class="form-group">
                    <label for="locations" class="block text-sm font-medium mb-2">Number of Locations</label>
                    <input type="number" id="locations" min="1" value="1" required class="w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary focus:border-primary transition-colors">
                </div>
            </div>
        </form>

        <div class="bg-gray-100 dark:bg-gray-700 p-4 md:p-6 rounded-lg">
            <h2 class="text-lg md:text-xl font-bold mb-4">Your Service Summary</h2>
            <div id="priceBreakdown" class="space-y-3 text-sm mb-6"></div>
            <div class="text-xl md:text-2xl font-bold mb-6">Monthly Total: $<span id="monthlyTotal">0</span></div>
            <button id="exportQuote" class="bg-primary text-white px-4 py-3 rounded-md w-full hover:bg-red-700 active:bg-red-800 transition-colors focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:outline-none">
                Export Estimate
            </button>
        </div>
    </div>
</div>

<script>
    const CONFIG = {
        PRICING: {
            EmpowerLegal: {
                tier1: { base: 1450, computerOver10: 105, server: 275, location: 475 },
                tier2: { base: 2050, computerOver10: 125, server: 275, location: 475 },
                tier3: { base: 2375, computerOver10: 150, server: 275, location: 475 }
            },
            EmpowerPlusLegal: {
                tier1: { base: 2275, computerOver10: 140, server: 275, location: 475 },
                tier2: { base: 2875, computerOver10: 170, server: 275, location: 475 },
                tier3: { base: 3200, computerOver10: 205, server: 275, location: 475 }
            }
        }
    };

    const elements = {
        form: document.getElementById('calculatorForm'),
        product: document.getElementById('product'),
        region: document.getElementById('region'),
        computers: document.getElementById('computers'),
        servers: document.getElementById('servers'),
        locations: document.getElementById('locations'),
        priceBreakdown: document.getElementById('priceBreakdown'),
        monthlyTotal: document.getElementById('monthlyTotal'),
        themeToggle: document.getElementById('themeToggle'),
        exportQuote: document.getElementById('exportQuote')
    };

    function calculatePrice() {
        const product = elements.product.value;
        const region = elements.region.value;
        const pricing = CONFIG.PRICING[product][region];
        
        // Get input values
        const computers = Math.max(10, parseInt(elements.computers.value) || 10);
        const servers = Math.max(1, parseInt(elements.servers.value) || 1);
        const locations = Math.max(1, parseInt(elements.locations.value) || 1);

        // Calculate computer costs
        const extraComputers = Math.max(0, computers - 10);
        const computerCost = extraComputers * pricing.computerOver10;

        // Calculate server and location costs
        const extraServers = Math.max(0, servers - 1);
        const extraLocations = Math.max(0, locations - 1);
        const serverCost = extraServers * pricing.server;
        const locationCost = extraLocations * pricing.location;

        return {
            base: pricing.base,
            computers: {
                count: computers,
                cost: computerCost
            },
            servers: {
                count: servers,
                cost: serverCost
            },
            locations: {
                count: locations,
                cost: locationCost
            }
        };
    }

    function updateUI(prices) {
        const total = prices.base + prices.computers.cost + prices.servers.cost + prices.locations.cost;
          
          elements.priceBreakdown.innerHTML = `
              <div class="grid grid-cols-3 gap-2 font-bold border-b border-gray-300 dark:border-gray-600 pb-2 mb-2">
                  <div>Item</div>
                  <div class="text-right">Count</div>
                  <div class="text-right">Amount</div>
              </div>
              <div class="grid grid-cols-3 gap-2">
                  <div>Base Price</div>
                  <div class="text-right">-</div>
                  <div class="text-right">$${prices.base.toLocaleString()}</div>
              </div>
              <div class="grid grid-cols-3 gap-2">
                  <div>Computers</div>
                  <div class="text-right">${prices.computers.count}</div>
                  <div class="text-right">${prices.computers.cost === 0 ? 'Included' : '$' + prices.computers.cost.toLocaleString()}</div>
              </div>
              <div class="grid grid-cols-3 gap-2">
                  <div>Servers</div>
                  <div class="text-right">${prices.servers.count}</div>
                  <div class="text-right">${prices.servers.cost === 0 ? 'Included' : '$' + prices.servers.cost.toLocaleString()}</div>
              </div>
              <div class="grid grid-cols-3 gap-2">
                  <div>Locations</div>
                  <div class="text-right">${prices.locations.count}</div>
                  <div class="text-right">${prices.locations.cost === 0 ? 'Included' : '$' + prices.locations.cost.toLocaleString()}</div>
              </div>
          `;
          
          elements.monthlyTotal.textContent = total.toLocaleString();
      }
        
        elements.monthlyTotal.textContent = total.toLocaleString();
    }

    function handleCalculation() {
        const prices = calculatePrice();
        updateUI(prices);
        return prices;
    }

    function handleThemeToggle() {
        document.documentElement.classList.toggle('dark');
    }

    function initializeApp() {
        handleCalculation();
        
        elements.form.addEventListener('input', handleCalculation);
        elements.themeToggle.addEventListener('click', handleThemeToggle);
        elements.exportQuote.addEventListener('click', () => {
            const prices = handleCalculation();
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF();
            
            // PDF Header
            pdf.setFontSize(20);
            pdf.text('Empower Legal Service Estimate', 20, 20);
            
            // Estimate Details
            pdf.setFontSize(12);
            pdf.text(`Generated: ${new Date().toLocaleDateString()}`, 20, 30);
            
            const product = elements.product.options[elements.product.selectedIndex].text;
            const region = elements.region.options[elements.region.selectedIndex].text;
            
            pdf.text(`Product: ${product}`, 20, 40);
            pdf.text(`Region: ${region}`, 20, 50);
            
            // Price Breakdown Table
            pdf.text('Price Breakdown:', 20, 70);
            
            let y = 80;
            pdf.text('Item', 20, y);
            pdf.text('Count', 100, y);
            pdf.text('Amount', 150, y);
            
            y += 10;
            pdf.line(20, y, 190, y);
            
            y += 10;
            pdf.text('Base Price', 20, y);
            pdf.text('-', 100, y);
            pdf.text(`$${prices.base.toLocaleString()}`, 150, y);
            
            y += 10;
            pdf.text('Computers', 20, y);
            pdf.text(prices.computers.count.toString(), 100, y);
            pdf.text(`$${prices.computers.cost.toLocaleString()}`, 150, y);
            
            y += 10;
            pdf.text('Servers', 20, y);
            pdf.text(prices.servers.count.toString(), 100, y);
            pdf.text(`$${prices.servers.cost.toLocaleString()}`, 150, y);
            
            y += 10;
            pdf.text('Locations', 20, y);
            pdf.text(prices.locations.count.toString(), 100, y);
            pdf.text(`$${prices.locations.cost.toLocaleString()}`, 150, y);
            
            y += 10;
            pdf.line(20, y, 190, y);
            
            y += 10;
            const total = prices.base + prices.computers.cost + prices.servers.cost + prices.locations.cost;
            pdf.setFont(undefined, 'bold');
            pdf.text('Total Monthly Cost:', 20, y);
            pdf.text(`$${total.toLocaleString()}`, 150, y);
            
            // Save the PDF
            pdf.save('empower-legal-estimate.pdf');
        });
    }

    // Initialize the application when the DOM is ready
    document.addEventListener('DOMContentLoaded', initializeApp);

    // Check for system dark mode preference
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.documentElement.classList.add('dark');
    }
</script>
</body>
</html>
